(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof module==="object"&&module.exports){module.exports=factory()}else{root.Jroff=factory()}})(this,function(){var COMMENT=1,MACRO=2,IMACRO=3,BREAK=4,TEXT=5,EMPTY=6,ESCAPE=7;var callableMacros=["Ac","Ao","Bc","Bo","Brc","Bro","Dc","Do","Ec","Eo","Fc","Oc","Oo","Pc","Po","Qc","Qo","Sc","So","Xc","Xo","Aq","Bq","Brq","Dq","Op","Pq","Ql","Qq","Sq","Vt","Ta","Ad","An","Ap","Ar","At","Bsx","Bx","Cd","Cm","Dv","Dx","Em","Er","Ev","Fa","Fl","Fn","Ft","Fx","Ic","Li","Lk","Ms","Mt","Nm","Ns","Nx","Ox","Pa","Pf","Sx","Sy","Tn","Ux","Va","Vt","Xr"];var patterns={macro:/^\./,macroStart:/^.\s*/,lexeme:/(\n|\s+|^\.\s+\S+)/g,comment:/(\.\\)?\\\"/,arguments:/"(.*?)"|\S+/g,number:/[\d]/,realNumber:/(^[\-|\+]?\d)/,escape:/(\\[^\"])/g,wrappingQuotes:/^\s*?\"([^\"]*)\"\s*?$/g,noWhiteSpace:/\S/,newLine:/[ \t]*\n/};var mergeObjects=function(objects){return objects.reduce(function(memo,object){for(var key in object){if(object.hasOwnProperty(key)){memo[key]=object[key]}}return memo},{})};var canHaveNodes=function(token){return[MACRO,IMACRO,ESCAPE].indexOf(token.kind)!==-1};var macros={},macroLib=null;var Token=function(value,kind){this.value=value||"";this.kind=kind||EMPTY;this.nodes=[]};Token.isComment=function(str){return patterns.comment.test(str)};Token.isEmptyLine=function(str){return patterns.newLine.test(str)};Token.isInlineMacro=function(str){return callableMacros.indexOf(str)!==-1&&macroLib==="doc"};Token.isMacro=function(str){return patterns.macro.test(str)};Token.isEscape=function(str){return str.charAt(0)==="\\"};Token.prototype.addNode=function(token){this.nodes.push(token);return this};Token.prototype.lastNode=function(){return this.nodes[this.nodes.length-1]||new Token};Token.prototype.mix=function(token){this.value=this.value+token.value;if(this.kind===EMPTY){this.kind=token.kind}return this};var TokenFactory=function(){};TokenFactory.prototype.create=function(rawToken){var kind=TEXT;if(typeof rawToken==="undefined"){kind=EMPTY}else if(Token.isComment(rawToken)){kind=COMMENT}else if(Token.isMacro(rawToken)){kind=MACRO}else if(Token.isInlineMacro(rawToken)){kind=IMACRO}else if(Token.isEmptyLine(rawToken)){kind=BREAK}else if(Token.isEscape(rawToken)){kind=ESCAPE}return new Token(rawToken,kind)};var Lexer=function(source){this.source=this.cleanSource(source).split(patterns.lexeme);this.tokens=[];this.sourceIdx=0;this.col=0;this.line=1;this.factory=new TokenFactory};Lexer.prototype.cleanSource=function(source){return source.replace(patterns.escape," $1 ").replace(/</g,"&lt;").replace(/>/g,"&gt;")};Lexer.prototype.lex=function(){var lexeme;while(typeof(lexeme=this.next())!=="undefined"){this.tokens.push(this.factory.create(lexeme))}return this.tokens};Lexer.prototype.next=function(){var lexeme=this.source[this.sourceIdx++];if(lexeme==="\n"){this.col=0;this.line+=1}else if(lexeme){this.col+=lexeme.length}return lexeme};var Parser=function(input){this.ast=[];this.scope=this.ast;this.lexer=new Lexer(input);this.tokens=this.lexer.lex();this.lastTok=new Token("",BREAK);this.escapeWithArguments=["\\f","\\s","\\m","\\("];this.mappings={};this.mappings[MACRO]="handleMacro";this.mappings[IMACRO]="setNewScope";this.mappings[TEXT]="handleText";this.mappings[ESCAPE]="handleEscape";this.mappings[BREAK]="handleBreak";this.mappings[COMMENT]="ignore";this.mappings[EMPTY]="ignore"};Parser.prototype.next=function(){return this.tokens.shift()};Parser.prototype.addToScope=function(token){this.scope.push(token);this.lastTok=token};Parser.prototype.buildAST=function(){var token;while(token=this.next()){this[this.mappings[token.kind]](token)}return this.ast};Parser.prototype.handleMacro=function(token){if(this.lastTok.kind===BREAK){token.value=token.value.replace(patterns.macroStart,"");this.setNewScope(token)}else{this.handleText(token)}};Parser.prototype.setNewScope=function(token){this.addToScope(token);this.scope=token.nodes};Parser.prototype.handleBreak=function(token){this.scope=this.ast;if(this.lastTok.kind===BREAK){this.scope.push(new Token("br",MACRO))}else{this.scope.push(new Token(" ",TEXT))}this.lastTok=token};Parser.prototype.handleEscape=function(token){if(this.escapeWithArguments.indexOf(token.value)!==-1){var escapeParam;this.next();escapeParam=this.next();escapeParam.kind=TEXT;token.nodes.push(escapeParam)}this.addToScope(token)};Parser.prototype.handleText=function(token){if(!token.value){return}token.kind=TEXT;if(this.lastTok.kind===TEXT){this.lastTok.mix(token)}else{if(canHaveNodes(this.lastTok)){token.value=token.value.trim()}this.addToScope(token)}};Parser.prototype.ignore=function(token){this.scope=[];this.lastTok=token};macros.an={TH:function(args){var title;args=this.parseArguments(args);this.buffer.title=args[0]||"";this.buffer.section=args[1]||"";this.buffer.date=args[2]||"";this.buffer.source=args[3]||"";this.buffer.manual=args[4]||"";title=this.buffer.title+"("+this.buffer.section+")";return"<p><span>"+title+"</span>"+"<span>"+this.buffer.manual+"</span>"+"<span>"+title+"</span></p>"},SH:function(args){var openingTag='<section style="margin-left:'+this.buffer.style.indent+'%;">',preamble="";this.buffer.section=args;preamble+=this.closeAllTags(this.buffer.fontModes);preamble+=this.closeAllTags(this.buffer.openTags);preamble+=this.closeAllTags(this.buffer.sectionTags);this.buffer.sectionTags.push("section");return preamble+this.generateTag("h2",args)+openingTag},SS:function(args){return this.generateTag("h3",args)},B:function(args){return this.generateTag("strong",args)},BI:function(args){return this.generateAlternTag("strong","i",args)},BR:function(args){return this.generateAlternTag("strong","span",args)},I:function(args){return this.generateTag("i",args)},IB:function(args){return this.generateAlternTag("i","strong",args)},IR:function(args){return this.generateAlternTag("i","span",args)},RB:function(args){return this.generateAlternTag("span","strong",args)},RI:function(args){return this.generateAlternTag("span","i",args)},SB:function(args){return this.generateAlternTag("small","strong",args)},SM:function(args){return this.generateTag("small",args)},P:function(){var result="";result+=this.closeAllTags(this.buffer.fontModes);result+=this.closeTagsUntil("div",this.buffer.openTags);this.buffer.openTags.push("div");return result+'<div style="margin-bottom: 2%;">'},RS:function(indent){var result="";indent=indent||this.buffer.style.indent;result+=this.closeAllTags(this.buffer.fontModes);result+='<section style="margin-left:'+indent+'%">';this.buffer.openTags.push("section");return result},RE:function(){return this.closeTagsUntil("section",this.buffer.openTags)}};macros.an.LP=macros.an.P;macros.an.PP=macros.an.P;var fontMappings={B:"strong",R:"span",I:"i",S:"small"};macros.defaults={br:function(){return"<br>"},ss:function(number){this.buffer.openTags.push("span");return'<span style="word-spacing:'+number/36+'em;">'},ft:function(fontType){var result="",type;fontType=this.parseArguments(fontType)[0];type=fontMappings[fontType.trim()];result+=this.closeAllTags(this.buffer.fontModes);if(type!==fontMappings.R){result+="<"+type+"> ";this.buffer.fontModes.push(type)}return result},vs:function(spacing){spacing=spacing||12;this.buffer.openTags.push("section");return'<section style="line-height:'+spacing/12+'em;">'},nf:function(){return"<br>"},"in":function(indent){indent=indent||3;this.buffer.openTags.push("section");return'<section style="margin-left:'+indent/3+'em;">'},ul:function(){return macros.defaults.ft.call(this,"I")},cu:function(){return macros.defaults.ft.call(this,"I")},sp:function(spacing){spacing=spacing||"2";return'<hr style="margin-top:'+spacing+'em;visibility:hidden;">'},"if":function(){return""},ie:function(){return""},el:function(){return""},"\\}":function(){return""},de:function(){return""},ne:function(){return""},".":function(){return""},fi:function(){return""},nh:function(){this.buffer.style.hyphens="none"},ad:function(align){this.buffer.style.textAlign=align},"\\\\":function(){return macros.defaults["\\e"].call(this)},"\\e":function(){return"\\ "},"\\-":function(){return"&minus;"},"\\f":function(args){var fontType;args=args.trim();fontType=args.charAt(0);return macros.defaults.ft.call(this,fontType)+" "+args.slice(1)},"\\&":function(){return""},"\\s":function(args){var txt;args=args.split(patterns.realNumber);txt=args[2]||"";this.buffer.style.fontSize+=parseInt(args[1],10);this.buffer.openTags.push("span");return'<span style="font-size:'+this.buffer.style.fontSize+'px;">'+txt},"\\m":function(){return""},"\\(":function(){return""},"\\d":function(){return""},"\\u":function(){return""},"\\+":function(){return"&plus;"}};var docSections={1:"General Commands Manual",2:"System Calls Manual",3:"Library Functions Manual",4:"Kernel Interfaces Manual",5:"File Formats Manual",6:"Games Manual",7:"Miscellaneous Information Manual",8:"System Manager's Manual",9:"Kernel Developer's Manual"};var volumes={USD:"User's Supplementary Documents",PS1:"Programmer's Supplementary Documents",AMD:"Ancestral Manual Documents",SMM:"System Manager's Manual",URM:"User's Reference Manual",PRM:"Programmer's Manual",KM:"Kernel Manual",IND:"Manual Master Index",LOCAL:"Local Manual",CON:"Contributed Software Manual"};var architectures=["alpha","acorn26","acorn32","algor","amd64","amiga","arc","arm26","arm32","atari","bebox","cats","cesfic","cobalt","dreamcast","evbarm","evbmips","evbppc","evbsh3","hp300","hp700","hpcmips","i386","luna68k","m68k","mac68k","macppc","mips","mmeye","mvme68k","mvmeppc","netwinder","news68k","newsmips","next68k","ofppc","pc532","pmax","pmppc","powerpc","prep","sandpoint","sgimips","sh3","shark","sparc","sparc64","sun3","tahoe","vax","x68k","x86_64"];var fontModes={"-emphasis":"i","-literal":"span","-symbolic":"strong"};var abbreviations={"-ansiC":"ANSI X3.159-1989 (``ANSI C89'')","-ansiC-89":"ANSI X3.159-1989 (``ANSI C89'')","-isoC":"ISO/IEC 9899:1990 (``ISO C90'')","-isoC-90":"ISO/IEC 9899:1990 (``ISO C90'')","-isoC-99":"ISO/IEC 9899:1999 (``ISO C99'')","-iso9945-1-90":"ISO/IEC 9945-1:1990 (``POSIX.1'')","-iso9945-1-96":"ISO/IEC 9945-1:1996 (``POSIX.1'')","-p1003.1":"IEEE Std 1003.1 (``POSIX.1'')","-p1003.1-88":"IEEE Std 1003.1-1988 (``POSIX.1'')","-p1003.1-90":"ISO/IEC 9945-1:1990 (``POSIX.1'')","-p1003.1-96":"ISO/IEC 9945-1:1996 (``POSIX.1'')","-p1003.1b-93":"IEEE Std 1003.1b-1993 (``POSIX.1'')","-p1003.1c-95":"IEEE Std 1003.1c-1995 (``POSIX.1'')","-p1003.1g-2000":"IEEE Std 1003.1g-2000 (``POSIX.1'')","-p1003.1i-95":"IEEE Std 1003.1i-1995 (``POSIX.1'')","-p1003.1-2001":"IEEE Std 1003.1-2001 (``POSIX.1'')","-p1003.1-2004":"IEEE Std 1003.1-2004 (``POSIX.1'')","-iso9945-2-93":"ISO/IEC 9945-2:1993 (``POSIX.2'')","-p1003.2":"IEEE Std 1003.2 (``POSIX.2'')","-p1003.2-92":"IEEE Std 1003.2-1992 (``POSIX.2'')","-p1003.2a-92":"IEEE Std 1003.2a-1992 (``POSIX.2'')","-susv2":"Version 2 of the Single UNIX Specification (``SUSv2'')","-susv3":"Version 3 of the Single UNIX Specification (``SUSv3'')","-svid4":"System V Interface Definition, Fourth Edition (``SVID4'')","-xbd5":"X/Open System Interface Definitions Issue 5 (``XBD5'')","-xcu5":"X/Open Commands and Utilities Issue 5 (``XCU5'')","-xcurses4.2":"X/Open Curses Issue 4, Version 2 (``XCURSES4.2'')","-xns5":"X/Open Networking Services Issue 5 (``XNS5'')","-xns5.2":"X/Open Networking Services Issue 5.2 (``XNS5.2'')","-xpg3":"X/Open Portability Guide Issue 3 (``XPG3'')","-xpg4":"X/Open Portability Guide Issue 4 (``XPG4'')","-xpg4.2":"X/Open Portability Guide Issue 4, Version 2 (``XPG4.2'')","-xsh5":"X/Open System Interfaces and Headers Issue 5 (``XSH5'')","-ieee754":"IEEE Std 754-1985","-iso8802-3":"ISO/IEC 8802-3:1989"};macros.doc={Dt:function(args){var sideText,midText,title,section,volume;args=this.parseArguments(args);title=args[0];section=args[1];volume=args[2];this.buffer.title=title||"UNTITLED";this.buffer.section=section||"";this.buffer.volume=volume||"LOCAL";sideText=this.buffer.title;midText=this.buffer.volume;if(section){sideText=this.buffer.title+"("+this.buffer.section+")";if(volumes[volume]){midText=volumes[volume]}else if(architectures.indexOf(volume)!==-1){midText="BSD/"+volume+docSections[this.buffer.section]}else if(docSections[this.buffer.section]){midText="BSD"+docSections[this.buffer.section]}}return"<p><span>"+sideText+"</span>"+"<span>"+midText+"</span>"+"<span>"+sideText+"</span></p><section>"},Dd:function(date){this.buffer.date=date},Os:function(os){this.buffer.os=os},Ad:function(args){return this.generateTag("i",args)},An:function(author){return this.generateTag("span",author)},Ar:function(args){args=args||"file...";return this.generateTag("i",args)},Cd:function(args){var tag=this.isInsideOfSection("SYNOPSIS")?"p>strong":"strong";return this.generateTag(tag,args)},Dv:function(args){return this.generateTag("span",args)},Ev:function(args){return this.generateTag("span",args)},Fl:function(args){return this.generateTag("strong","-"+args)},Cm:function(args){return this.generateTag("strong",args)},Nm:function(args){var result;this.buffer.name=this.buffer.name||args;result=args||this.buffer.name;return this.generateTag("strong",result)},Nd:function(args){return this.generateTag("span","-- "+args)},Sh:function(args){var openingTag='<section style="margin-left:'+this.buffer.style.indent+'%;">';this.buffer.section=args;return"</section>"+this.generateTag("h2",args)+openingTag},Op:function(args){return this.generateTag("span","["+args+"]")},Xr:function(args){var name,number,text;args=this.parseArguments(args);name=args.shift()||"";number=args[0]?"("+args.shift()+")":"";text=args.join(" ")||"";return this.generateTag("span",name+number+text)},Bl:function(args){var indent;args=this.parseArguments(args);this.buffer.lists.unshift({flags:args,prevTag:"",isOpen:false});indent=this.buffer.style.indent/4*(this.buffer.lists.length-1);return'<ul style="list-style:none;padding:0 0 0 '+indent+'%;">'},It:function(args){var list=this.buffer.lists[0],pre=list.isOpen?"</span></li>":"",tagStyles="",tag="",contentStyles="margin-bottom:2%;";list.isOpen=true;for(var i=list.flags.length-1;i>=0;i--){switch(list.flags[i]){case"-bullet":tag="&compfn;";contentStyles+="margin-left:2%;";break;case"-dash":tag="&minus;";contentStyles+="margin-left:2%;";break;case"-enum":list.prevTag=list.prevTag||1;tag=list.prevTag+++".";contentStyles+="margin-left:2%;";break;case"-item":tag="";contentStyles+="margin-left:2%;";break;case"-tag":tag=args;tagStyles+="display:inline-block;";contentStyles+="margin-left:2%;";break;case"-hang":tag=this.generateTag("i",args);tagStyles+="width:8%;display:inline-block;";contentStyles+="margin-left:2%;";break;case"-ohang":tag=this.generateTag("strong",args);tagStyles+="display:block;";contentStyles+="display:inline-block";break;case"-inset":tag=this.generateTag("i",args);contentStyles+="display:inline-block;";break;case"-compact":tagStyles+="margin-bottom: 0;";contentStyles+="margin-bottom:0;"}}return pre+'<li><span style="'+tagStyles+'">'+tag+'</span><span style="'+contentStyles+'">'},El:function(){this.buffer.lists.shift();return"</span></li></ul>"},Pp:function(){this.buffer.openTags.push("p");return"<p>"},Oo:function(){return"["},Oc:function(){return"]"},Aq:function(args){return this.generateTag("span","&lt;"+args+"&gt;")},Ao:function(){return this.generateTag("span","&lt;")},Ac:function(){return this.generateTag("span","&gt;")},Bq:function(args){return this.generateTag("span","["+args+"]")},Bo:function(){return this.generateTag("span","[")},Bc:function(){return this.generateTag("span","]")},Brq:function(args){return this.generateTag("span","{"+args+"}")},Bro:function(){return this.generateTag("span","{")},Brc:function(){return this.generateTag("span","}")},Dq:function(args){return this.generateTag("span","``"+args+"''")},Do:function(){return this.generateTag("span","``")},Dc:function(){return this.generateTag("span","''")},Eq:function(args){return this.generateTag("span","XX"+args+"XX")},Eo:function(){return this.generateTag("span","XX")},Ec:function(){return this.generateTag("span","XX")},Pq:function(args){return this.generateTag("span","("+args+")")},Po:function(){return this.generateTag("span","(")},Pc:function(){return this.generateTag("span",")")},Qq:function(args){return this.generateTag("span",'"'+args+'"')},Qo:function(){return this.generateTag("span",'"')},Qc:function(){return this.generateTag("span",'"')},Sq:function(args){return this.generateTag("span","`"+args+"'")},So:function(){return this.generateTag("span","`")},Sc:function(){return this.generateTag("span","'")},St:function(args){var cont="";args=args;if(abbreviations[args]){cont=this.generateTag("abbr",abbreviations[args])}return cont},At:function(version){var base=" AT&amp;T UNIX",preamble;version=version.match(patterns.number);preamble=version?"Version "+version[0]:"";return this.generateTag("span",preamble+base)},Bx:function(version){var base,out;base="BSD";version=version;if(version==="-devel"){out=base+"(currently under development)"}else{out=version+base}return this.generateTag("span",out)},Nx:function(version){return this.generateTag("span","NetBSD "+version)},Fx:function(version){return this.generateTag("span","FreeBSD "+version)},Dx:function(version){return this.generateTag("span","DragonFly "+version)},Ox:function(version){return this.generateTag("span","OpenBSD "+version)},Osx:function(version){return this.generateTag("span","BSD/OS "+version)},Ux:function(){return this.generateTag("span","UNIX")},Pf:function(args){args=this.parseArguments(args);return args.shift()+args.shift()+args.join(" ")},Pa:function(args){args=args||"~";return this.generateTag("i",args)},Ql:function(args){return this.generateTag("span","`"+args+"'")},Rs:function(){this.buffer.references={authors:[],bookTitle:"",date:"",publisherName:"",journalName:"",issueNumber:"",optionalInformation:"",pageNumber:"",corporate:"",reportName:"",articleTitle:"",volume:""}},"%A":function(name){this.buffer.references.authors.push(name)},"%B":function(title){this.buffer.references.bookTitle+=" "+title},"%D":function(date){this.buffer.references.date+=" "+date},"%I":function(name){this.buffer.references.publisherName+=" "+name},"%J":function(name){this.buffer.references.journalName+=" "+name},"%N":function(issue){this.buffer.references.issueNumber+=" "+issue},"%O":function(args){this.buffer.references.optionalInformation+=" "+args},"%P":function(page){this.buffer.references.pageNumber+=" "+page},"%Q":function(name){this.buffer.references.corporate+=" "+name},"%R":function(name){this.buffer.references.reportName+=" "+name},"%T":function(title){this.buffer.references.articleTitle+=" "+title},"%V":function(volume){this.buffer.references.volume+=" "+volume},Re:function(){var references=[];this.buffer.references.authors=this.buffer.references.authors.join(" and ");for(var key in this.buffer.references){if(this.buffer.references[key]){references.push(this.buffer.references[key])}}return this.generateTag("p",references.join(", "))},Tn:function(args){return this.generateTag("small",args)},Sy:function(args){return this.generateTag("strong",args)},Va:function(args){return this.generateTag("i",args)},Li:function(args){return this.generateTag("span",args)},Bf:function(mode){var tag;mode=this.parseArguments(mode)[0];tag=fontModes[mode]||"span";this.buffer.activeFontModes.push(tag);return"<"+tag+">"},Ef:function(){var tag=this.buffer.activeFontModes.pop();return"</"+tag+">"},Ss:function(subtitle){return this.generateTag("h3",subtitle)},Fn:function(args){var type,name,params,storedType;args=this.parseArguments(args);if(!args[0]){return""}storedType=this.buffer.functionType;type=storedType?this.generateTag("i",storedType):"";name=this.generateTag("strong",args[0]);params=args[1]||"";this.buffer.functionType="";return this.generateTag("span",type+name+"("+params+")")},Ft:function(type){this.buffer.functionType=type},Fo:function(name){this.buffer.functionArgs=[];this.buffer.functionName=name},Fa:function(arg){this.buffer.functionArgs.push(arg)},Fc:function(){var args=this.buffer.functionArgs.join(", "),callParams=this.buffer.functionName+' "'+args+'"';return macros.doc.Fn.call(this,callParams)},Vt:function(args){var base=this.generateTag("i",args),postamble=this.isInsideOfSection("SYNOPSIS")?"<br>":"";return base+postamble},Em:function(text){return this.generateTag("i",text)}};var HTMLGenerator=function(){};HTMLGenerator.prototype.generate=function(source,lib){var parser,ast;if(!source){return""}parser=new Parser(source);ast=parser.buildAST();lib=lib||"doc";this.macros=mergeObjects([macros.defaults,macros[lib]]);macroLib=lib;this.buffer={style:{indent:8,fontSize:16},references:[],lists:[],openTags:[],fontModes:[],sectionTags:[],activeFontModes:[],section:""};return this.recurse(ast)};HTMLGenerator.prototype.recurse=function(arr){return arr.reduce(this.reduceRecursive.bind(this),"")};HTMLGenerator.prototype.reduceRecursive=function(result,node){var func,args;if(canHaveNodes(node)){if(node.value==="Sh"||node.value==="SH"){result+=this.closeAllTags(this.buffer.fontModes);result+=this.closeAllTags(this.buffer.openTags)}func=this.macros[node.value]||this.undefMacro;args=node.nodes.length?this.recurse(node.nodes):"";result+=func.call(this,args,node)||""}else{result+=this.cleanQuotes(node.value)}return result};HTMLGenerator.prototype.undefMacro=function(args,node){console.warn("Unsupported macro:",node.value);return args};HTMLGenerator.prototype.cleanQuotes=function(str){return str.replace(patterns.wrappingQuotes,"$1")};HTMLGenerator.prototype.generateTag=function(name,content){var tags=name.split(">"),i=-1,openingTags="",closingTags="";while(tags[++i]){openingTags+="<"+tags[i]+">"}while(tags[--i]){closingTags+="</"+tags[i]+">"}return openingTags+content+closingTags};HTMLGenerator.prototype.generateAlternTag=function(tag1,tag2,c){var i=-1,result="",currentTag=tag2;c=this.parseArguments(c);while(c[++i]){currentTag=currentTag===tag1?tag2:tag1;result+=this.generateTag(currentTag,c[i])}return result};HTMLGenerator.prototype.closeTag=function(tag){return"</"+tag+">"};HTMLGenerator.prototype.closeAllTags=function(tags){return this.closeTagsUntil(tags[0],tags)};HTMLGenerator.prototype.closeTagsUntil=function(limitTag,tags){var result="",tag;if(tags.indexOf(limitTag)!==-1){while(tag=tags.pop()){result+=this.closeTag(tag);if(tag===limitTag){break}}}return result};HTMLGenerator.prototype.parseArguments=function(args){args=args.match(patterns.arguments)||[];return args.map(function(arg){return this.cleanQuotes(arg).trim()}.bind(this))};HTMLGenerator.prototype.isInsideOfSection=function(section){return this.buffer.section.toLowerCase()===section.toLowerCase()};return{HTMLGenerator:HTMLGenerator,Lexer:Lexer,Token:Token,TokenFactory:TokenFactory,macros:macros,patterns:patterns,Parser:Parser,COMMENT:COMMENT,MACRO:MACRO,IMACRO:IMACRO,BREAK:BREAK,TEXT:TEXT,EMPTY:EMPTY}});
